function output = pos_endEffector_onlyDH_lengthCalibration(parameter_input, data)
% INPUT
% first parameter  : sensor offsetÀÇ initial value
% second parameter : simulation data °ª 

   
B1 = parameter_input(1); D1 = parameter_input(2);
                         D2 = parameter_input(3);
                         D3 = parameter_input(4);
                         D5 = parameter_input(5);
                         D6 = parameter_input(6);

pos_reference = data(:, 12:14);
        
    for i=1:size(data, 1)
        
        B2 = data(i,1);B3 = data(i,2);B5 = data(i,3);B6 = data(i,4);
                
        diff_x = 57.5*cos(B5)*(cos(B3)*cos(D3)*(cos(D2 + 1.5708)*cos(B1)*sin(B2) - 1.0*sin(D1 - 1.5708)*sin(D2 + 1.5708)*sin(B1) + cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B2)*sin(B1)) - 1.0*sin(D3)*(sin(D2 + 1.5708)*cos(B1)*sin(B2) + cos(D2 + 1.5708)*sin(D1 - 1.5708)*sin(B1) + cos(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B2)*sin(B1)) + cos(D3)*sin(B3)*(cos(B1)*cos(B2) - 1.0*cos(D1 - 1.5708)*sin(B1)*sin(B2))) - 37.0*sin(D6)*(cos(D5)*(cos(D3)*(sin(D2 + 1.5708)*cos(B1)*sin(B2) + cos(D2 + 1.5708)*sin(D1 - 1.5708)*sin(B1) + cos(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B2)*sin(B1)) + cos(B3)*sin(D3)*(cos(D2 + 1.5708)*cos(B1)*sin(B2) - 1.0*sin(D1 - 1.5708)*sin(D2 + 1.5708)*sin(B1) + cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B2)*sin(B1)) + sin(B3)*sin(D3)*(cos(B1)*cos(B2) - 1.0*cos(D1 - 1.5708)*sin(B1)*sin(B2))) + 1.0*cos(B5)*sin(D5)*(1.0*sin(B3)*(cos(D2 + 1.5708)*cos(B1)*sin(B2) - 1.0*sin(D1 - 1.5708)*sin(D2 + 1.5708)*sin(B1) + cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B2)*sin(B1)) - cos(B3)*(cos(B1)*cos(B2) - 1.0*cos(D1 - 1.5708)*sin(B1)*sin(B2))) + sin(B5)*sin(D5)*(cos(B3)*cos(D3)*(cos(D2 + 1.5708)*cos(B1)*sin(B2) - 1.0*sin(D1 - 1.5708)*sin(D2 + 1.5708)*sin(B1) + cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B2)*sin(B1)) - 1.0*sin(D3)*(sin(D2 + 1.5708)*cos(B1)*sin(B2) + cos(D2 + 1.5708)*sin(D1 - 1.5708)*sin(B1) + cos(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B2)*sin(B1)) + cos(D3)*sin(B3)*(cos(B1)*cos(B2) - 1.0*cos(D1 - 1.5708)*sin(B1)*sin(B2)))) - 17.25*sin(B6)*(cos(B5)*cos(D5)*(1.0*sin(B3)*(cos(D2 + 1.5708)*cos(B1)*sin(B2) - 1.0*sin(D1 - 1.5708)*sin(D2 + 1.5708)*sin(B1) + cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B2)*sin(B1)) - cos(B3)*(cos(B1)*cos(B2) - 1.0*cos(D1 - 1.5708)*sin(B1)*sin(B2))) - sin(D5)*(cos(D3)*(sin(D2 + 1.5708)*cos(B1)*sin(B2) + cos(D2 + 1.5708)*sin(D1 - 1.5708)*sin(B1) + cos(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B2)*sin(B1)) + cos(B3)*sin(D3)*(cos(D2 + 1.5708)*cos(B1)*sin(B2) - 1.0*sin(D1 - 1.5708)*sin(D2 + 1.5708)*sin(B1) + cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B2)*sin(B1)) + sin(B3)*sin(D3)*(cos(B1)*cos(B2) - 1.0*cos(D1 - 1.5708)*sin(B1)*sin(B2))) + 1.0*cos(D5)*sin(B5)*(cos(B3)*cos(D3)*(cos(D2 + 1.5708)*cos(B1)*sin(B2) - 1.0*sin(D1 - 1.5708)*sin(D2 + 1.5708)*sin(B1) + cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B2)*sin(B1)) - 1.0*sin(D3)*(sin(D2 + 1.5708)*cos(B1)*sin(B2) + cos(D2 + 1.5708)*sin(D1 - 1.5708)*sin(B1) + cos(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B2)*sin(B1)) + cos(D3)*sin(B3)*(cos(B1)*cos(B2) - 1.0*cos(D1 - 1.5708)*sin(B1)*sin(B2)))) - 12.94*sin(D3)*(sin(D2 + 1.5708)*cos(B1)*sin(B2) + cos(D2 + 1.5708)*sin(D1 - 1.5708)*sin(B1) + cos(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B2)*sin(B1)) + 17.25*cos(B6)*(cos(B5)*(cos(B3)*cos(D3)*(cos(D2 + 1.5708)*cos(B1)*sin(B2) - 1.0*sin(D1 - 1.5708)*sin(D2 + 1.5708)*sin(B1) + cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B2)*sin(B1)) - 1.0*sin(D3)*(sin(D2 + 1.5708)*cos(B1)*sin(B2) + cos(D2 + 1.5708)*sin(D1 - 1.5708)*sin(B1) + cos(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B2)*sin(B1)) + cos(D3)*sin(B3)*(cos(B1)*cos(B2) - 1.0*cos(D1 - 1.5708)*sin(B1)*sin(B2))) - sin(B5)*(1.0*sin(B3)*(cos(D2 + 1.5708)*cos(B1)*sin(B2) - 1.0*sin(D1 - 1.5708)*sin(D2 + 1.5708)*sin(B1) + cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B2)*sin(B1)) - cos(B3)*(cos(B1)*cos(B2) - 1.0*cos(D1 - 1.5708)*sin(B1)*sin(B2)))) - 56.03*sin(B3)*(cos(D2 + 1.5708)*cos(B1)*sin(B2) - 1.0*sin(D1 - 1.5708)*sin(D2 + 1.5708)*sin(B1) + cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B2)*sin(B1)) + 56.03*cos(B3)*(cos(B1)*cos(B2) - 1.0*cos(D1 - 1.5708)*sin(B1)*sin(B2)) + 24.21*cos(B1)*cos(B2) - 57.5*sin(B5)*(1.0*sin(B3)*(cos(D2 + 1.5708)*cos(B1)*sin(B2) - 1.0*sin(D1 - 1.5708)*sin(D2 + 1.5708)*sin(B1) + cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B2)*sin(B1)) - cos(B3)*(cos(B1)*cos(B2) - 1.0*cos(D1 - 1.5708)*sin(B1)*sin(B2))) + 37.0*cos(D6)*sin(B6)*(cos(B5)*(cos(B3)*cos(D3)*(cos(D2 + 1.5708)*cos(B1)*sin(B2) - 1.0*sin(D1 - 1.5708)*sin(D2 + 1.5708)*sin(B1) + cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B2)*sin(B1)) - 1.0*sin(D3)*(sin(D2 + 1.5708)*cos(B1)*sin(B2) + cos(D2 + 1.5708)*sin(D1 - 1.5708)*sin(B1) + cos(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B2)*sin(B1)) + cos(D3)*sin(B3)*(cos(B1)*cos(B2) - 1.0*cos(D1 - 1.5708)*sin(B1)*sin(B2))) - sin(B5)*(1.0*sin(B3)*(cos(D2 + 1.5708)*cos(B1)*sin(B2) - 1.0*sin(D1 - 1.5708)*sin(D2 + 1.5708)*sin(B1) + cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B2)*sin(B1)) - cos(B3)*(cos(B1)*cos(B2) - 1.0*cos(D1 - 1.5708)*sin(B1)*sin(B2)))) + 12.94*cos(B3)*cos(D3)*(cos(D2 + 1.5708)*cos(B1)*sin(B2) - 1.0*sin(D1 - 1.5708)*sin(D2 + 1.5708)*sin(B1) + cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B2)*sin(B1)) - 24.21*cos(D1 - 1.5708)*sin(B1)*sin(B2) + 12.94*cos(D3)*sin(B3)*(cos(B1)*cos(B2) - 1.0*cos(D1 - 1.5708)*sin(B1)*sin(B2)) + 37.0*cos(B6)*cos(D6)*(cos(B5)*cos(D5)*(1.0*sin(B3)*(cos(D2 + 1.5708)*cos(B1)*sin(B2) - 1.0*sin(D1 - 1.5708)*sin(D2 + 1.5708)*sin(B1) + cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B2)*sin(B1)) - cos(B3)*(cos(B1)*cos(B2) - 1.0*cos(D1 - 1.5708)*sin(B1)*sin(B2))) - sin(D5)*(cos(D3)*(sin(D2 + 1.5708)*cos(B1)*sin(B2) + cos(D2 + 1.5708)*sin(D1 - 1.5708)*sin(B1) + cos(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B2)*sin(B1)) + cos(B3)*sin(D3)*(cos(D2 + 1.5708)*cos(B1)*sin(B2) - 1.0*sin(D1 - 1.5708)*sin(D2 + 1.5708)*sin(B1) + cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B2)*sin(B1)) + sin(B3)*sin(D3)*(cos(B1)*cos(B2) - 1.0*cos(D1 - 1.5708)*sin(B1)*sin(B2))) + 1.0*cos(D5)*sin(B5)*(cos(B3)*cos(D3)*(cos(D2 + 1.5708)*cos(B1)*sin(B2) - 1.0*sin(D1 - 1.5708)*sin(D2 + 1.5708)*sin(B1) + cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B2)*sin(B1)) - 1.0*sin(D3)*(sin(D2 + 1.5708)*cos(B1)*sin(B2) + cos(D2 + 1.5708)*sin(D1 - 1.5708)*sin(B1) + cos(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B2)*sin(B1)) + cos(D3)*sin(B3)*(cos(B1)*cos(B2) - 1.0*cos(D1 - 1.5708)*sin(B1)*sin(B2))));
        diff_y = 56.03*cos(B3)*(cos(B2)*sin(B1) + cos(D1 - 1.5708)*cos(B1)*sin(B2)) + 57.5*sin(B5)*(cos(B3)*(cos(B2)*sin(B1) + cos(D1 - 1.5708)*cos(B1)*sin(B2)) - 1.0*sin(B3)*(cos(D2 + 1.5708)*sin(B1)*sin(B2) + sin(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B1) - 1.0*cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B1)*cos(B2))) - 56.03*sin(B3)*(cos(D2 + 1.5708)*sin(B1)*sin(B2) + sin(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B1) - 1.0*cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B1)*cos(B2)) + 17.25*sin(B6)*(sin(D5)*(sin(B3)*sin(D3)*(cos(B2)*sin(B1) + cos(D1 - 1.5708)*cos(B1)*sin(B2)) - 1.0*cos(D3)*(cos(D2 + 1.5708)*sin(D1 - 1.5708)*cos(B1) - 1.0*sin(D2 + 1.5708)*sin(B1)*sin(B2) + cos(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B1)*cos(B2)) + cos(B3)*sin(D3)*(cos(D2 + 1.5708)*sin(B1)*sin(B2) + sin(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B1) - 1.0*cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B1)*cos(B2))) - 1.0*cos(D5)*sin(B5)*(sin(D3)*(cos(D2 + 1.5708)*sin(D1 - 1.5708)*cos(B1) - 1.0*sin(D2 + 1.5708)*sin(B1)*sin(B2) + cos(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B1)*cos(B2)) + cos(D3)*sin(B3)*(cos(B2)*sin(B1) + cos(D1 - 1.5708)*cos(B1)*sin(B2)) + cos(B3)*cos(D3)*(cos(D2 + 1.5708)*sin(B1)*sin(B2) + sin(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B1) - 1.0*cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B1)*cos(B2))) + cos(B5)*cos(D5)*(cos(B3)*(cos(B2)*sin(B1) + cos(D1 - 1.5708)*cos(B1)*sin(B2)) - 1.0*sin(B3)*(cos(D2 + 1.5708)*sin(B1)*sin(B2) + sin(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B1) - 1.0*cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B1)*cos(B2)))) + 12.94*sin(D3)*(cos(D2 + 1.5708)*sin(D1 - 1.5708)*cos(B1) - 1.0*sin(D2 + 1.5708)*sin(B1)*sin(B2) + cos(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B1)*cos(B2)) - 37.0*sin(D6)*(cos(D5)*(sin(B3)*sin(D3)*(cos(B2)*sin(B1) + cos(D1 - 1.5708)*cos(B1)*sin(B2)) - 1.0*cos(D3)*(cos(D2 + 1.5708)*sin(D1 - 1.5708)*cos(B1) - 1.0*sin(D2 + 1.5708)*sin(B1)*sin(B2) + cos(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B1)*cos(B2)) + cos(B3)*sin(D3)*(cos(D2 + 1.5708)*sin(B1)*sin(B2) + sin(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B1) - 1.0*cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B1)*cos(B2))) - 1.0*cos(B5)*sin(D5)*(cos(B3)*(cos(B2)*sin(B1) + cos(D1 - 1.5708)*cos(B1)*sin(B2)) - 1.0*sin(B3)*(cos(D2 + 1.5708)*sin(B1)*sin(B2) + sin(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B1) - 1.0*cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B1)*cos(B2))) + sin(B5)*sin(D5)*(sin(D3)*(cos(D2 + 1.5708)*sin(D1 - 1.5708)*cos(B1) - 1.0*sin(D2 + 1.5708)*sin(B1)*sin(B2) + cos(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B1)*cos(B2)) + cos(D3)*sin(B3)*(cos(B2)*sin(B1) + cos(D1 - 1.5708)*cos(B1)*sin(B2)) + cos(B3)*cos(D3)*(cos(D2 + 1.5708)*sin(B1)*sin(B2) + sin(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B1) - 1.0*cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B1)*cos(B2)))) + 17.25*cos(B6)*(sin(B5)*(cos(B3)*(cos(B2)*sin(B1) + cos(D1 - 1.5708)*cos(B1)*sin(B2)) - 1.0*sin(B3)*(cos(D2 + 1.5708)*sin(B1)*sin(B2) + sin(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B1) - 1.0*cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B1)*cos(B2))) + cos(B5)*(sin(D3)*(cos(D2 + 1.5708)*sin(D1 - 1.5708)*cos(B1) - 1.0*sin(D2 + 1.5708)*sin(B1)*sin(B2) + cos(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B1)*cos(B2)) + cos(D3)*sin(B3)*(cos(B2)*sin(B1) + cos(D1 - 1.5708)*cos(B1)*sin(B2)) + cos(B3)*cos(D3)*(cos(D2 + 1.5708)*sin(B1)*sin(B2) + sin(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B1) - 1.0*cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B1)*cos(B2)))) + 24.21*cos(B2)*sin(B1) + 57.5*cos(B5)*(sin(D3)*(cos(D2 + 1.5708)*sin(D1 - 1.5708)*cos(B1) - 1.0*sin(D2 + 1.5708)*sin(B1)*sin(B2) + cos(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B1)*cos(B2)) + cos(D3)*sin(B3)*(cos(B2)*sin(B1) + cos(D1 - 1.5708)*cos(B1)*sin(B2)) + cos(B3)*cos(D3)*(cos(D2 + 1.5708)*sin(B1)*sin(B2) + sin(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B1) - 1.0*cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B1)*cos(B2))) - 37.0*cos(B6)*cos(D6)*(sin(D5)*(sin(B3)*sin(D3)*(cos(B2)*sin(B1) + cos(D1 - 1.5708)*cos(B1)*sin(B2)) - 1.0*cos(D3)*(cos(D2 + 1.5708)*sin(D1 - 1.5708)*cos(B1) - 1.0*sin(D2 + 1.5708)*sin(B1)*sin(B2) + cos(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B1)*cos(B2)) + cos(B3)*sin(D3)*(cos(D2 + 1.5708)*sin(B1)*sin(B2) + sin(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B1) - 1.0*cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B1)*cos(B2))) - 1.0*cos(D5)*sin(B5)*(sin(D3)*(cos(D2 + 1.5708)*sin(D1 - 1.5708)*cos(B1) - 1.0*sin(D2 + 1.5708)*sin(B1)*sin(B2) + cos(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B1)*cos(B2)) + cos(D3)*sin(B3)*(cos(B2)*sin(B1) + cos(D1 - 1.5708)*cos(B1)*sin(B2)) + cos(B3)*cos(D3)*(cos(D2 + 1.5708)*sin(B1)*sin(B2) + sin(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B1) - 1.0*cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B1)*cos(B2))) + cos(B5)*cos(D5)*(cos(B3)*(cos(B2)*sin(B1) + cos(D1 - 1.5708)*cos(B1)*sin(B2)) - 1.0*sin(B3)*(cos(D2 + 1.5708)*sin(B1)*sin(B2) + sin(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B1) - 1.0*cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B1)*cos(B2)))) + 24.21*cos(D1 - 1.5708)*cos(B1)*sin(B2) + 37.0*cos(D6)*sin(B6)*(sin(B5)*(cos(B3)*(cos(B2)*sin(B1) + cos(D1 - 1.5708)*cos(B1)*sin(B2)) - 1.0*sin(B3)*(cos(D2 + 1.5708)*sin(B1)*sin(B2) + sin(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B1) - 1.0*cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B1)*cos(B2))) + cos(B5)*(sin(D3)*(cos(D2 + 1.5708)*sin(D1 - 1.5708)*cos(B1) - 1.0*sin(D2 + 1.5708)*sin(B1)*sin(B2) + cos(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B1)*cos(B2)) + cos(D3)*sin(B3)*(cos(B2)*sin(B1) + cos(D1 - 1.5708)*cos(B1)*sin(B2)) + cos(B3)*cos(D3)*(cos(D2 + 1.5708)*sin(B1)*sin(B2) + sin(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B1) - 1.0*cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B1)*cos(B2)))) + 12.94*cos(D3)*sin(B3)*(cos(B2)*sin(B1) + cos(D1 - 1.5708)*cos(B1)*sin(B2)) + 12.94*cos(B3)*cos(D3)*(cos(D2 + 1.5708)*sin(B1)*sin(B2) + sin(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B1) - 1.0*cos(D1 - 1.5708)*cos(D2 + 1.5708)*cos(B1)*cos(B2));
        diff_z = 57.5*sin(B5)*(sin(B3)*(cos(D1 - 1.5708)*sin(D2 + 1.5708) + cos(D2 + 1.5708)*sin(D1 - 1.5708)*cos(B2)) + sin(D1 - 1.5708)*cos(B3)*sin(B2)) + 24.21*sin(D1 - 1.5708)*sin(B2) + 17.25*sin(B6)*(sin(D5)*(cos(D3)*(cos(D1 - 1.5708)*cos(D2 + 1.5708) - 1.0*sin(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B2)) - 1.0*cos(B3)*sin(D3)*(cos(D1 - 1.5708)*sin(D2 + 1.5708) + cos(D2 + 1.5708)*sin(D1 - 1.5708)*cos(B2)) + sin(D1 - 1.5708)*sin(B2)*sin(B3)*sin(D3)) + cos(D5)*sin(B5)*(sin(D3)*(cos(D1 - 1.5708)*cos(D2 + 1.5708) - 1.0*sin(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B2)) + cos(B3)*cos(D3)*(cos(D1 - 1.5708)*sin(D2 + 1.5708) + cos(D2 + 1.5708)*sin(D1 - 1.5708)*cos(B2)) - 1.0*sin(D1 - 1.5708)*cos(D3)*sin(B2)*sin(B3)) + cos(B5)*cos(D5)*(sin(B3)*(cos(D1 - 1.5708)*sin(D2 + 1.5708) + cos(D2 + 1.5708)*sin(D1 - 1.5708)*cos(B2)) + sin(D1 - 1.5708)*cos(B3)*sin(B2))) + 56.03*sin(B3)*(cos(D1 - 1.5708)*sin(D2 + 1.5708) + cos(D2 + 1.5708)*sin(D1 - 1.5708)*cos(B2)) + 17.25*cos(B6)*(sin(B5)*(sin(B3)*(cos(D1 - 1.5708)*sin(D2 + 1.5708) + cos(D2 + 1.5708)*sin(D1 - 1.5708)*cos(B2)) + sin(D1 - 1.5708)*cos(B3)*sin(B2)) - 1.0*cos(B5)*(sin(D3)*(cos(D1 - 1.5708)*cos(D2 + 1.5708) - 1.0*sin(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B2)) + cos(B3)*cos(D3)*(cos(D1 - 1.5708)*sin(D2 + 1.5708) + cos(D2 + 1.5708)*sin(D1 - 1.5708)*cos(B2)) - 1.0*sin(D1 - 1.5708)*cos(D3)*sin(B2)*sin(B3))) - 57.5*cos(B5)*(sin(D3)*(cos(D1 - 1.5708)*cos(D2 + 1.5708) - 1.0*sin(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B2)) + cos(B3)*cos(D3)*(cos(D1 - 1.5708)*sin(D2 + 1.5708) + cos(D2 + 1.5708)*sin(D1 - 1.5708)*cos(B2)) - 1.0*sin(D1 - 1.5708)*cos(D3)*sin(B2)*sin(B3)) - 12.94*sin(D3)*(cos(D1 - 1.5708)*cos(D2 + 1.5708) - 1.0*sin(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B2)) + 37.0*sin(D6)*(sin(B5)*sin(D5)*(sin(D3)*(cos(D1 - 1.5708)*cos(D2 + 1.5708) - 1.0*sin(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B2)) + cos(B3)*cos(D3)*(cos(D1 - 1.5708)*sin(D2 + 1.5708) + cos(D2 + 1.5708)*sin(D1 - 1.5708)*cos(B2)) - 1.0*sin(D1 - 1.5708)*cos(D3)*sin(B2)*sin(B3)) - 1.0*cos(D5)*(cos(D3)*(cos(D1 - 1.5708)*cos(D2 + 1.5708) - 1.0*sin(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B2)) - 1.0*cos(B3)*sin(D3)*(cos(D1 - 1.5708)*sin(D2 + 1.5708) + cos(D2 + 1.5708)*sin(D1 - 1.5708)*cos(B2)) + sin(D1 - 1.5708)*sin(B2)*sin(B3)*sin(D3)) + cos(B5)*sin(D5)*(sin(B3)*(cos(D1 - 1.5708)*sin(D2 + 1.5708) + cos(D2 + 1.5708)*sin(D1 - 1.5708)*cos(B2)) + sin(D1 - 1.5708)*cos(B3)*sin(B2))) + 56.03*sin(D1 - 1.5708)*cos(B3)*sin(B2) - 37.0*cos(B6)*cos(D6)*(sin(D5)*(cos(D3)*(cos(D1 - 1.5708)*cos(D2 + 1.5708) - 1.0*sin(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B2)) - 1.0*cos(B3)*sin(D3)*(cos(D1 - 1.5708)*sin(D2 + 1.5708) + cos(D2 + 1.5708)*sin(D1 - 1.5708)*cos(B2)) + sin(D1 - 1.5708)*sin(B2)*sin(B3)*sin(D3)) + cos(D5)*sin(B5)*(sin(D3)*(cos(D1 - 1.5708)*cos(D2 + 1.5708) - 1.0*sin(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B2)) + cos(B3)*cos(D3)*(cos(D1 - 1.5708)*sin(D2 + 1.5708) + cos(D2 + 1.5708)*sin(D1 - 1.5708)*cos(B2)) - 1.0*sin(D1 - 1.5708)*cos(D3)*sin(B2)*sin(B3)) + cos(B5)*cos(D5)*(sin(B3)*(cos(D1 - 1.5708)*sin(D2 + 1.5708) + cos(D2 + 1.5708)*sin(D1 - 1.5708)*cos(B2)) + sin(D1 - 1.5708)*cos(B3)*sin(B2))) - 12.94*cos(B3)*cos(D3)*(cos(D1 - 1.5708)*sin(D2 + 1.5708) + cos(D2 + 1.5708)*sin(D1 - 1.5708)*cos(B2)) + 37.0*cos(D6)*sin(B6)*(sin(B5)*(sin(B3)*(cos(D1 - 1.5708)*sin(D2 + 1.5708) + cos(D2 + 1.5708)*sin(D1 - 1.5708)*cos(B2)) + sin(D1 - 1.5708)*cos(B3)*sin(B2)) - 1.0*cos(B5)*(sin(D3)*(cos(D1 - 1.5708)*cos(D2 + 1.5708) - 1.0*sin(D1 - 1.5708)*sin(D2 + 1.5708)*cos(B2)) + cos(B3)*cos(D3)*(cos(D1 - 1.5708)*sin(D2 + 1.5708) + cos(D2 + 1.5708)*sin(D1 - 1.5708)*cos(B2)) - 1.0*sin(D1 - 1.5708)*cos(D3)*sin(B2)*sin(B3))) + 12.94*sin(D1 - 1.5708)*cos(D3)*sin(B2)*sin(B3);
        
        
        
        ref_x = pos_reference(i,1);
        ref_y = pos_reference(i,2);
        ref_z = pos_reference(i,3);
        
        output(i,1) = sqrt((diff_x-ref_x)^2+(diff_y-ref_y)^2+(diff_z-ref_z)^2);
        
    end
    
%     disp(strcat(["output: ", output]))

   

end

% 'trust-region-reflective'
% options = optimoptions(@lsqnonlin,'Algorithm', 'levenberg-marquardt','Display', 'iter', 'MaxFunctionEvaluations', 1000000, 'MaxIterations', 100000);
% options = optimoptions(@lsqnonlin,'Algorithm', 'trust-region-reflective','Display', 'iter', 'MaxFunctionEvaluations', 1000000, 'MaxIterations', 100000);
% lsqnonlin(@pos_endEffector, [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[],[],options, data)
